<h1>Addresses</h1>
<div class="pure-form">
  <%= form_for @address, url: {action: "create"} do |f| %>
    <fieldset>
      <legend>Add a new email address</legend>
      <%= f.text_field :to, :placeholder => "Address" %>
      <%= f.submit "Add", :class => "pure-button pure-button-primary" %>
    </fieldset>
  <% end %>
</div>

<% unless @addresses.empty? %>
  # TODO: add a title here
  <div class="table">
    <table class="pure-table">
      <thead>
        <tr>
          <th>Address</th>
          <th>Aliases</th>
          <th>Actions</th>
        </tr>
      </thead>

      <% @addresses.each do |a| %>
        <tbody>
          <tr>
            <td class="<%= "not_verified" unless a.verified %> <%= "default" if a.default? %>">
              <%= a.to %>
            </td>
            <td>
              <%= a.aliases.count %>
            </td>
            <td>
              <%= button_to "Edit",   { :controller => "addresses", :action => "edit", :id => a.id }, :method => :get, :class => "pure-button" %>
              <%= button_to "Delete", { :controller => "addresses", :action => "destroy", :id => a.id}, :data => { :confirm => "Are you sure?" }, :method => :delete, :class => "pure-button" %>
              <%= button_to "Verify", { :controller => "addresses", :action => "verify", :address_id => a.id}, :method => :post, :class => "pure-button" %>
            </td>
          </tr>
        </tbody>
      <% end %>
    </table>
  </div>
<% end %>

